# pr9

## Завдання 9.1
**Опис:** Читання облікових записів з `/etc/passwd` за допомогою команди `getent passwd` та перевірка наявності інших звичайних користувачів.

**[Реалізація:](https://github.com/VladHume/pr9/blob/main/task9_1.c)**
- Використано команду `getent passwd` для отримання списку користувачів.
- Відбір користувачів з UID >= 1000 (звичайні користувачі).
- Перевірка UID поточного користувача, щоб не включати себе у вивід.

**Результат:**
Програма виводить список інших звичайних користувачів у системі.
![image](https://github.com/user-attachments/assets/bb78ea5f-95bc-4de3-bc96-d42d11c1283e)

## Завдання 9.2
**Опис:** Виконання команди `cat /etc/shadow` від імені адміністратора з правами звичайного користувача.

**[Реалізація:](https://github.com/VladHume/pr9/blob/main/task9_2.c)**
- Використано команду `sudo` для отримання прав суперкористувача.
- Команда `system("sudo cat /etc/shadow")` викликається з програми.

**Результат:**
- Вивід вмісту `/etc/shadow` можливий лише якщо в конфігурації `sudoers` дозволено запуск команди без пароля.

## Завдання 9.3
**Опис:** Створення файлу, копіювання його від імені root та перевірка доступу до файлу звичайним користувачем.

**[Реалізація:](https://github.com/VladHume/pr9/blob/main/task9_3.c)**
- Створено файл користувачем.
- Копіювання файлу в домашню директорію з `sudo`.
- Зміна власника файлу на `root`.
- Спроба змінити файл та його видалити звичайним користувачем.

**Результат:**
- Звичайний користувач не має права змінювати або видаляти файл, оскільки він належить root.

## Завдання 9.4
**Опис:** Перевірка облікового запису за допомогою команд `whoami` та `id`.

**[Реалізація:](https://github.com/VladHume/pr9/blob/main/task9_4.c)**
- Виконано команди `whoami` та `id` з програми.
- Отримано інформацію про поточного користувача та групи, до яких він належить.

**Результат:**
- Програма виводить ім'я користувача та список груп.

## Завдання 9.5
**Опис:** Створення тимчасового файлу, зміна власника на root та модифікація прав доступу.

**[Реалізація:](https://github.com/VladHume/pr9/blob/main/task9_5.c)**
- Створено тимчасовий файл.
- Використано `sudo chown root:root` та `sudo chmod 600`.
- Перевірено можливість читання та запису у файл від імені звичайного користувача.

**Результат:**
- Звичайний користувач не може читати або записувати у файл після зміни власника та прав доступу.

## Завдання 9.6
**Опис:** Перевірка власника та прав доступу у домашньому каталозі, `/usr/bin` та `/etc`.

**[Реалізація:](https://github.com/VladHume/pr9/blob/main/task9_6.c)**
- Виконано команду `ls -l` для кожного з каталогів.
- Перевірено спроби читання, запису та виконання файлів у цих каталогах.

**Результат:**
- Читання у домашній теці дозволене.
- У `/usr/bin` дозволене виконання більшості файлів.
- У `/etc` обмежений доступ, особливо до критичних файлів.
- Запис та зміна системних файлів заборонена звичайним користувачам.

## Висновки:
- Система надійно обмежує доступ до файлів залежно від прав користувача та власника файлу.
- Правильне налаштування прав доступу та власників забезпечує безпеку операційної системи.
- Навіть root може бути обмежений у доступі до NFS залежно від конфігурації.


## Завдання по варіантах: поведінка у різних файлових системах

### ext4 (локальна файлова система)
- Файл з правами `000` неможливо прочитати, змінити або видалити звичайним користувачем.
- Root має можливість обійти ці обмеження.
```bash
touch /tmp/custom_file
chmod 000 /tmp/custom_file
```

### tmpfs (файлова система в оперативній пам'яті)
```bash
sudo mount -t tmpfs -o size=100M tmpfs /mnt/tmpfs
touch /mnt/tmpfs/custom_file
chmod 000 /mnt/tmpfs/custom_file
```
**Поведінка:**
- Повністю аналогічна ext4.
- Всі обмеження на права доступу працюють коректно.
- Важливо: файли зникають після перезавантаження, оскільки tmpfs зберігається у RAM.

### NFS (мережева файлова система)
```bash
touch /mnt/nfs/custom_file
chmod 000 /mnt/nfs/custom_file
```
**Поведінка:**
- Якщо NFS налаштований із параметром `root_squash`, навіть root не зможе отримати доступ до файлу.
- Можуть виникати затримки через кешування прав доступу.
- В деяких випадках некоректно налаштований NFS дозволяє обхід прав доступу.

## Порівняльна таблиця

| Файлова система | Читання | Запис | Видалення | Особливості                               |
|-----------------|---------|-------|-----------|-------------------------------------------|
| ext4            | ❌       | ❌     | ❌         | Стандартна поведінка                      |
| tmpfs           | ❌       | ❌     | ❌         | Тимчасова, втрачається після перезавантаження |
| NFS             | ❌ / ⚠️  | ❌ / ⚠️ | ❌ / ⚠️     | Залежить від налаштувань сервера, можливі затримки кешування |

## Висновки

- У локальних файлових системах (ext4, tmpfs) права доступу ефективно захищають файли від несанкціонованого доступу.
- У NFS важливо правильно налаштовувати сервер, оскільки невірна конфігурація може призвести до обходу обмежень.
- Поведінка tmpfs відповідає ext4, але файли втрачаються після перезавантаження.
